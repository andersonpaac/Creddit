# Ingesting Data

There are two datasets that should be generated by Ingest.
1. comment_frame
   Comment_frame is the dataset containing the comments for a given post id along with features described in (1).
   
2. user_frame

### 1. Comment Extraction

1. Run `Comment_Extract.py` with the submission id of the post to pull data from.
2. This will output a dataframe into a pickle **{submission_id}_{date and time}.pkl** 
3. The dataframe will consist of the following features.
```
1. body
2. edited
3. author
4. comment_id
5. post_id
6. golds
7. score
8. parent_id
9. comment_removed_by_mods
10. comment_created_utc
11. is_submitter
12. comment_deleted
```


### 2. User Meta Data

1. Run `User_Extract.py` you need to pass the pickle filename containing the Comment dataframe.
2. The code will automatically skip accounts that have been deleted and suspended.
3. This will output a dataframe into a pickle containing **{input_fname}_authors.pkl**
4. The dataframe will consist of the following features.
```
1. author
2. user_total_comment_karma
3. user_total_post_karma
4. user_email_verified
5. user_account_creation_utc
6. user_total_post_count
7. user_total_comment_count
8. subreddit_comment_karma
9. subreddit_comment_count
10. subreddit_post_karma
11. subreddit_post_count
```


### 3. Merging Deleted and Removed Comments Using Pushshift + PRAW
1. Run the `Update.update_missing_comments` method, you will need to pass the pickle filename containing the Comment 
dataframe.
2. The code will diff the comment ids between what is in the frame and what is in `PushShift`. 
3. The merged dataframe will be output to the `out_fname`
